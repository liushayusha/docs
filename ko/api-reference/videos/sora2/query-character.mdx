---
title: 'Sora2 역할 조회(역할 관리)'
description: |
    - 역할 생성 작업의 상태와 결과 조회
    - 생성된 역할의 상세 정보 조회
    - 역할 ID 반환, 이후 영상 생성에 사용 가능
api: 'GET https://api.apimart.ai/v1/characters_tasks/{task_id}'
---
## 경로 매개변수

<ParamField path="task_id" type="string" required>
  역할 생성 작업 ID

  이는 역할 생성 API에서 반환된 작업 ID입니다

  예시: `"task_01KBZ0TZZ7C7M3WS1TJM0PH8J4"`
</ParamField>

## Authorizations

<ParamField header="Authorization" type="string" required>
  모든 API 엔드포인트는 Bearer Token을 사용한 인증이 필요합니다.

  API Key 가져오기:

  [API Key 관리 페이지](https://apimart.ai/console/token)에 접속하여 API Key를 받으세요.

  사용 시 요청 헤더에 다음을 추가하세요:

  ```
  Authorization: Bearer YOUR_API_KEY
  ```
</ParamField>

## Response

<ResponseField name="code" type="integer">
  응답 상태 코드, 성공 시 200
</ResponseField>

<ResponseField name="data" type="object">
  반환 데이터 객체

  <Expandable title="필드 설명">
    <ResponseField name="id" type="string">
      작업 고유 식별자

      예시: `"task_01KC0JZCMTMQ70D68XTM56Q5D0"`
    </ResponseField>

    <ResponseField name="status" type="string">
      작업 상태

      가능한 값:

      * `pending` - 대기 중
      * `processing` - 처리 중
      * `completed` - 완료됨
      * `failed` - 실패

      예시: `"completed"`
    </ResponseField>

    <ResponseField name="progress" type="integer">
      작업 완료 진행률 백분율 (0-100)

      예시: `100`
    </ResponseField>

    <ResponseField name="created" type="integer">
      작업 생성 타임스탬프 (Unix 타임스탬프)

      예시: `1765251461`
    </ResponseField>

    <ResponseField name="completed" type="integer">
      작업 완료 타임스탬프 (Unix 타임스탬프)

      예시: `1765251507`
    </ResponseField>

    <ResponseField name="estimated_time" type="integer">
      예상 처리 시간 (초)

      예시: `30`
    </ResponseField>

    <ResponseField name="actual_time" type="integer">
      실제 처리 시간 (초)

      예시: `46`
    </ResponseField>

    <ResponseField name="result" type="object">
      작업 결과

      <Expandable title="result 필드">
        <ResponseField name="characters" type="array">
          캐릭터 배열

          <Expandable title="캐릭터 객체">
            <ResponseField name="id" type="string">
              캐릭터 고유 식별자

              이 ID는 비디오 생성 시 `character_url` 파라미터로 해당 캐릭터를 참조할 수 있습니다

              예시: `"ch_6937998961208191a45ef08447a554df"`
            </ResponseField>

            <ResponseField name="display_name" type="string">
              캐릭터 표시 이름

              예시: `"Turbo Whiskers"`
            </ResponseField>

            <ResponseField name="profile_picture_url" type="string">
              캐릭터 프로필 사진 URL

              예시: `"https://upload.apimart.ai/f/image/...character_task_xxx.jpg"`
            </ResponseField>

            <ResponseField name="username" type="string">
              캐릭터 사용자 이름, 프롬프트에서 `@username` 으로 참조 가능

              예시: `"duksvfkf.turbo_whis"`
            </ResponseField>
          </Expandable>
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

<RequestExample>
  ```bash cURL
  curl --request GET \
    --url https://api.apimart.ai/v1/characters_tasks/task_01KBZ0TZZ7C7M3WS1TJM0PH8J4 \
    --header 'Authorization: Bearer <token>'
  ```

  ```python Python
  import requests

  task_id = "task_01KBZ0TZZ7C7M3WS1TJM0PH8J4"
  url = f"https://api.apimart.ai/v1/characters_tasks/{task_id}"

  headers = {
      "Authorization": "Bearer <token>"
  }

  response = requests.get(url, headers=headers)

  print(response.json())
  ```

  ```javascript JavaScript
  const taskId = "task_01KBZ0TZZ7C7M3WS1TJM0PH8J4";
  const url = `https://api.apimart.ai/v1/characters_tasks/${taskId}`;

  const headers = {
    "Authorization": "Bearer <token>"
  };

  fetch(url, {
    method: "GET",
    headers: headers
  })
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.error('Error:', error));
  ```

  ```go Go
  package main

  import (
      "fmt"
      "io/ioutil"
      "net/http"
  )

  func main() {
      taskId := "task_01KBZ0TZZ7C7M3WS1TJM0PH8J4"
      url := "https://api.apimart.ai/v1/characters_tasks/" + taskId

      req, _ := http.NewRequest("GET", url, nil)
      req.Header.Set("Authorization", "Bearer <token>")

      client := &http.Client{}
      resp, err := client.Do(req)
      if err != nil {
          panic(err)
      }
      defer resp.Body.Close()

      body, _ := ioutil.ReadAll(resp.Body)
      fmt.Println(string(body))
  }
  ```

  ```java Java
  import java.net.http.HttpClient;
  import java.net.http.HttpRequest;
  import java.net.http.HttpResponse;
  import java.net.URI;

  public class Main {
      public static void main(String[] args) throws Exception {
          String taskId = "task_01KBZ0TZZ7C7M3WS1TJM0PH8J4";
          String url = "https://api.apimart.ai/v1/characters_tasks/" + taskId;

          HttpClient client = HttpClient.newHttpClient();
          HttpRequest request = HttpRequest.newBuilder()
              .uri(URI.create(url))
              .header("Authorization", "Bearer <token>")
              .GET()
              .build();

          HttpResponse<String> response = client.send(request,
              HttpResponse.BodyHandlers.ofString());

          System.out.println(response.body());
      }
  }
  ```

  ```php PHP
  <?php

  $taskId = "task_01KBZ0TZZ7C7M3WS1TJM0PH8J4";
  $url = "https://api.apimart.ai/v1/characters_tasks/" . $taskId;

  $ch = curl_init($url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch, CURLOPT_HTTPHEADER, [
      "Authorization: Bearer <token>"
  ]);

  $response = curl_exec($ch);
  curl_close($ch);

  echo $response;
  ?>
  ```

  ```ruby Ruby
  require 'net/http'
  require 'json'
  require 'uri'

  task_id = "task_01KBZ0TZZ7C7M3WS1TJM0PH8J4"
  url = URI("https://api.apimart.ai/v1/characters_tasks/#{task_id}")

  http = Net::HTTP.new(url.host, url.port)
  http.use_ssl = true

  request = Net::HTTP::Get.new(url)
  request["Authorization"] = "Bearer <token>"

  response = http.request(request)
  puts response.body
  ```

  ```swift Swift
  import Foundation

  let taskId = "task_01KBZ0TZZ7C7M3WS1TJM0PH8J4"
  let url = URL(string: "https://api.apimart.ai/v1/characters_tasks/\(taskId)")!

  var request = URLRequest(url: url)
  request.httpMethod = "GET"
  request.setValue("Bearer <token>", forHTTPHeaderField: "Authorization")

  let task = URLSession.shared.dataTask(with: request) { data, response, error in
      if let error = error {
          print("Error: \(error)")
          return
      }

      if let data = data, let responseString = String(data: data, encoding: .utf8) {
          print(responseString)
      }
  }

  task.resume()
  ```

  ```csharp C#
  using System;
  using System.Net.Http;
  using System.Threading.Tasks;

  class Program
  {
      static async Task Main(string[] args)
      {
          var taskId = "task_01KBZ0TZZ7C7M3WS1TJM0PH8J4";
          var url = $"https://api.apimart.ai/v1/characters_tasks/{taskId}";

          using var client = new HttpClient();
          client.DefaultRequestHeaders.Add("Authorization", "Bearer <token>");

          var response = await client.GetAsync(url);
          var result = await response.Content.ReadAsStringAsync();

          Console.WriteLine(result);
      }
  }
  ```

  ```c C
  #include <stdio.h>
  #include <curl/curl.h>

  int main(void) {
      CURL *curl;
      CURLcode res;

      curl_global_init(CURL_GLOBAL_DEFAULT);
      curl = curl_easy_init();

      if(curl) {
          const char *url = "https://api.apimart.ai/v1/characters_tasks/task_01KBZ0TZZ7C7M3WS1TJM0PH8J4";

          struct curl_slist *headers = NULL;
          headers = curl_slist_append(headers, "Authorization: Bearer <token>");

          curl_easy_setopt(curl, CURLOPT_URL, url);
          curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);

          res = curl_easy_perform(curl);

          if(res != CURLE_OK) {
              fprintf(stderr, "curl_easy_perform() failed: %s\n",
                      curl_easy_strerror(res));
          }

          curl_slist_free_all(headers);
          curl_easy_cleanup(curl);
      }

      curl_global_cleanup();
      return 0;
  }
  ```

  ```objectivec Objective-C
  #import <Foundation/Foundation.h>

  int main(int argc, const char * argv[]) {
      @autoreleasepool {
          NSString *taskId = @"task_01KBZ0TZZ7C7M3WS1TJM0PH8J4";
          NSString *urlString = [NSString stringWithFormat:@"https://api.apimart.ai/v1/characters_tasks/%@", taskId];
          NSURL *url = [NSURL URLWithString:urlString];

          NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
          [request setHTTPMethod:@"GET"];
          [request setValue:@"Bearer <token>" forHTTPHeaderField:@"Authorization"];

          NSURLSessionDataTask *task = [[NSURLSession sharedSession]
              dataTaskWithRequest:request
              completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
                  if (error) {
                      NSLog(@"Error: %@", error);
                      return;
                  }
                  NSString *result = [[NSString alloc] initWithData:data
                                                          encoding:NSUTF8StringEncoding];
                  NSLog(@"%@", result);
              }];

          [task resume];
          [[NSRunLoop mainRunLoop] run];
      }
      return 0;
  }
  ```

  ```ocaml OCaml
  (* Requires cohttp and yojson libraries *)
  open Lwt
  open Cohttp
  open Cohttp_lwt_unix

  let task_id = "task_01KBZ0TZZ7C7M3WS1TJM0PH8J4"
  let url = "https://api.apimart.ai/v1/characters_tasks/" ^ task_id

  let () =
    let headers = Header.init ()
      |> fun h -> Header.add h "Authorization" "Bearer <token>"
    in

    let response = Client.get ~headers (Uri.of_string url) >>= fun (resp, body) ->
      body |> Cohttp_lwt.Body.to_string >|= fun body_str ->
      print_endline body_str
    in
    Lwt_main.run response
  ```

  ```dart Dart
  import 'dart:convert';
  import 'package:http/http.dart' as http;

  void main() async {
    final taskId = 'task_01KBZ0TZZ7C7M3WS1TJM0PH8J4';
    final url = Uri.parse('https://api.apimart.ai/v1/characters_tasks/$taskId');

    final response = await http.get(
      url,
      headers: {
        'Authorization': 'Bearer <token>',
      },
    );

    print(response.body);
  }
  ```

  ```r R
  library(httr)
  library(jsonlite)

  task_id <- "task_01KBZ0TZZ7C7M3WS1TJM0PH8J4"
  url <- paste0("https://api.apimart.ai/v1/characters_tasks/", task_id)

  response <- GET(
    url,
    add_headers(
      Authorization = "Bearer <token>"
    )
  )

  cat(content(response, "text"))
  ```
</RequestExample>

<ResponseExample>
  ```json 200
  {
    "code": 200,
    "data": {
      "actual_time": 46,
      "completed": 1765251507,
      "created": 1765251461,
      "estimated_time": 30,
      "id": "task_01KC0JZCMTMQ70D68XTM56Q5D0",
      "progress": 100,
      "result": {
        "characters": [
          {
            "display_name": "Turbo Whiskers",
            "id": "ch_6937998961208191a45ef08447a554df",
            "profile_picture_url": "https://upload.apimart.ai/f/image/9998234748474202-d5305f13-3dec-4420-9cae-2f5a6a809719-character_task_01KC0JZCMTMQ70D68XTM56Q5D0.jpg",
            "username": "duksvfkf.turbo_whis"
          }
        ]
      },
      "status": "completed"
    }
  }
  ```

  ```json 400
  {
    "error": {
      "code": 400,
      "message": "잘못된 요청 파라미터",
      "type": "invalid_request_error"
    }
  }
  ```

  ```json 401
  {
    "error": {
      "code": 401,
      "message": "인증 실패, API 키를 확인하세요",
      "type": "authentication_error"
    }
  }
  ```

  ```json 404
  {
    "error": {
      "code": 404,
      "message": "작업을 찾을 수 없음",
      "type": "not_found_error"
    }
  }
  ```

  ```json 429
  {
    "error": {
      "code": 429,
      "message": "요청이 너무 많습니다. 잠시 후 다시 시도하세요",
      "type": "rate_limit_error"
    }
  }
  ```

  ```json 500
  {
    "error": {
      "code": 500,
      "message": "서버 내부 오류, 잠시 후 다시 시도하세요",
      "type": "server_error"
    }
  }
  ```
</ResponseExample>