# OpenAPI - 提交任务接口文档

## 概述

**接口地址:** `POST http://pxz-api.xinsulv.com/api/openapi/submit`

提交异步 AI 生成任务（图片生成、视频生成）。

## 认证方式

```
Authorization: Bearer <your-api-key>
```

## 请求参数

```typescript
{
  model: string;           // 必填 - 模型名称
  params: TaskParams;      // 必填 - 模型参数
  callback_url?: string;   // 可选 - 任务完成后的回调通知地址
  metadata?: object;       // 可选 - 自定义元数据（查询结果时原样返回）
}
```

## 响应结果

```typescript
{
  task_id: string;              // 任务ID，用于查询结果
  status: "pending";            // 初始状态
  estimated_credits?: number;   // 预估消耗积分
  created_at: string;           // 创建时间（ISO 格式）
}
```

---

## 模型与参数说明

### 图片生成模型

#### seedream_v4

Seedream V4 图片生成。

| 参数 | 类型 | 必填 | 可选值 | 默认值 |
|------|------|------|--------|--------|
| prompt | string | **是** | - | - |
| image_url | string[] | 否 | 最多 9 张图片 | - |
| aspect_ratio | string | 否 | `1:1`, `16:9`, `9:16`, `4:3`, `3:4` | `1:1` |
| resolution | string | 否 | `1K`, `2K`, `4K` | `1K` |
| output_n | string | 否 | `1`, `2`, `4` | `1` |

#### seedream_v4_5

Seedream V4.5 图片生成（更高质量）。

| 参数 | 类型 | 必填 | 可选值 | 默认值 |
|------|------|------|--------|--------|
| prompt | string | **是** | - | - |
| image_url | string[] | 否 | 最多 9 张图片 | - |
| aspect_ratio | string | 否 | `1:1`, `3:2`, `2:3`, `4:3`, `3:4`, `5:4`, `4:5`, `16:9`, `9:16`, `21:9` | `1:1` |
| resolution | string | 否 | `basic`, `high` | `basic` |

#### nano_banana

Nano Banana 图片生成。

| 参数 | 类型 | 必填 | 可选值 | 默认值 |
|------|------|------|--------|--------|
| prompt | string | **是** | - | - |
| image_url | string[] | 否 | 最多 9 张图片 | - |
| aspect_ratio | string | 否 | `auto`, `1:1`, `3:2`, `2:3`, `4:3`, `3:4`, `5:4`, `4:5`, `16:9`, `9:16`, `21:9` | `auto` |
| format | string | 否 | `png`, `jpeg` | `png` |

#### nano_banana_pro

Nano Banana Pro 图片生成。

| 参数 | 类型 | 必填 | 可选值 | 默认值 |
|------|------|------|--------|--------|
| prompt | string | **是** | - | - |
| image_url | string[] | 否 | 最多 8 张图片 | - |
| aspect_ratio | string | 否 | `auto`, `1:1`, `3:2`, `2:3`, `4:3`, `3:4`, `5:4`, `4:5`, `16:9`, `9:16`, `21:9` | `1:1` |
| resolution | string | 否 | `1K`, `2K`, `4K` | `1K` |
| format | string | 否 | `png`, `jpg` | `png` |

#### gpt_4o

GPT-4o 图片生成。

| 参数 | 类型 | 必填 | 可选值 | 默认值 |
|------|------|------|--------|--------|
| prompt | string | **是** | - | - |
| image_url | string | 否 | 仅支持单张图片 | - |
| aspect_ratio | string | 否 | `1:1`, `3:2`, `2:3` | `1:1` |

---

### 视频生成模型

#### sora2

Sora2 视频生成。

| 参数 | 类型 | 必填 | 可选值 | 默认值 |
|------|------|------|--------|--------|
| prompt | string | **是** | - | - |
| image_url | string | 否 | 单张图片（首帧） | - |
| aspect_ratio | string | 否 | `16:9`, `9:16` | `16:9` |
| video_length | string | 否 | `10`, `15`（秒） | `10` |

#### sora2_pro

Sora2 Pro 视频生成（更高质量）。

| 参数 | 类型 | 必填 | 可选值 | 默认值 |
|------|------|------|--------|--------|
| prompt | string | **是** | - | - |
| image_url | string | 否 | 单张图片（首帧） | - |
| aspect_ratio | string | 否 | `16:9`, `9:16` | `16:9` |
| video_length | string | 否 | `10`, `15`（秒） | `10` |
| resolution | string | 否 | `standard`, `high` | `standard` |

#### veo3_1

Veo3 视频生成。

| 参数 | 类型 | 必填 | 可选值 | 默认值 |
|------|------|------|--------|--------|
| prompt | string | **是** | - | - |
| image_url | string | 否 | 单张图片（首帧） | - |
| end_image_url | string | 否 | 单张图片（尾帧） | - |
| aspect_ratio | string | 否 | `16:9`, `9:16` | `16:9` |

#### veo3_1_fast

Veo3 Fast 视频生成（更快速度）。

| 参数 | 类型 | 必填 | 可选值 | 默认值 |
|------|------|------|--------|--------|
| prompt | string | **是** | - | - |
| image_url | string | 否 | 单张图片（首帧） | - |
| end_image_url | string | 否 | 单张图片（尾帧） | - |
| aspect_ratio | string | 否 | `16:9`, `9:16` | `16:9` |

---

## 快速参考表

### 图片模型

| 模型 | prompt | image_url | aspect_ratio | resolution | output_n | format |
|------|--------|-----------|--------------|------------|----------|--------|
| seedream_v4 | 必填 | 多张 (9) | 1:1,16:9,9:16,4:3,3:4 | 1K,2K,4K | 1,2,4 | - |
| seedream_v4_5 | 必填 | 多张 (9) | 1:1,3:2,2:3,4:3,3:4,5:4,4:5,16:9,9:16,21:9 | basic,high | - | - |
| nano_banana | 必填 | 多张 (9) | auto,1:1,3:2,2:3,4:3,3:4,5:4,4:5,16:9,9:16,21:9 | - | - | png,jpeg |
| nano_banana_pro | 必填 | 多张 (8) | auto,1:1,3:2,2:3,4:3,3:4,5:4,4:5,16:9,9:16,21:9 | 1K,2K,4K | - | png,jpg |
| gpt_4o | 必填 | 单张 | 1:1,3:2,2:3 | - | - | - |

### 视频模型

| 模型 | prompt | image_url | aspect_ratio | video_length | resolution | end_image_url |
|------|--------|-----------|--------------|--------------|------------|---------------|
| sora2 | 必填 | 单张 | 16:9,9:16 | 10,15 | - | - |
| sora2_pro | 必填 | 单张 | 16:9,9:16 | 10,15 | std,high | - |
| veo3_1 | 必填 | 单张 | 16:9,9:16 | - | - | 支持 |
| veo3_1_fast | 必填 | 单张 | 16:9,9:16 | - | - | 支持 |

---

## 请求示例

### 图片生成

```json
{
  "model": "seedream_v4",
  "params": {
    "prompt": "海边美丽的日落",
    "aspect_ratio": "16:9",
    "resolution": "2K",
    "output_n": "2"
  }
}
```

### 视频生成

```json
{
  "model": "sora2",
  "params": {
    "prompt": "一只猫在花园里散步",
    "aspect_ratio": "16:9",
    "video_length": "10"
  }
}
```

### 带参考图片

```json
{
  "model": "veo3_1",
  "params": {
    "prompt": "让这张图片动起来",
    "image_url": "https://example.com/reference.jpg",
    "aspect_ratio": "16:9"
  }
}
```

---

## 错误码说明

| 状态码 | 错误信息 | 说明 |
|--------|----------|------|
| 400 | Missing required field: model | 缺少必填字段：model |
| 400 | Missing or invalid field: params | params 字段缺失或无效 |
| 400 | Missing required field: prompt | 缺少必填字段：prompt |
| 400 | Invalid model | 不支持的模型 |
| 400 | Invalid parameter: {param} | 参数值对当前模型无效 |
| 401 | Unauthorized | API Key 无效或缺失 |
| 500 | Internal Server Error | 服务器内部错误 |
